"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@solana+codecs-data-structures@2.0.0-preview.2";
exports.ids = ["vendor-chunks/@solana+codecs-data-structures@2.0.0-preview.2"];
exports.modules = {

/***/ "(ssr)/../../node_modules/.pnpm/@solana+codecs-data-structures@2.0.0-preview.2/node_modules/@solana/codecs-data-structures/dist/index.node.js":
/*!**********************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@solana+codecs-data-structures@2.0.0-preview.2/node_modules/@solana/codecs-data-structures/dist/index.node.js ***!
  \**********************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   assertValidNumberOfItemsForCodec: () => (/* binding */ assertValidNumberOfItemsForCodec),\n/* harmony export */   getArrayCodec: () => (/* binding */ getArrayCodec),\n/* harmony export */   getArrayDecoder: () => (/* binding */ getArrayDecoder),\n/* harmony export */   getArrayEncoder: () => (/* binding */ getArrayEncoder),\n/* harmony export */   getBitArrayCodec: () => (/* binding */ getBitArrayCodec),\n/* harmony export */   getBitArrayDecoder: () => (/* binding */ getBitArrayDecoder),\n/* harmony export */   getBitArrayEncoder: () => (/* binding */ getBitArrayEncoder),\n/* harmony export */   getBooleanCodec: () => (/* binding */ getBooleanCodec),\n/* harmony export */   getBooleanDecoder: () => (/* binding */ getBooleanDecoder),\n/* harmony export */   getBooleanEncoder: () => (/* binding */ getBooleanEncoder),\n/* harmony export */   getBytesCodec: () => (/* binding */ getBytesCodec),\n/* harmony export */   getBytesDecoder: () => (/* binding */ getBytesDecoder),\n/* harmony export */   getBytesEncoder: () => (/* binding */ getBytesEncoder),\n/* harmony export */   getDataEnumCodec: () => (/* binding */ getDataEnumCodec),\n/* harmony export */   getDataEnumDecoder: () => (/* binding */ getDataEnumDecoder),\n/* harmony export */   getDataEnumEncoder: () => (/* binding */ getDataEnumEncoder),\n/* harmony export */   getMapCodec: () => (/* binding */ getMapCodec),\n/* harmony export */   getMapDecoder: () => (/* binding */ getMapDecoder),\n/* harmony export */   getMapEncoder: () => (/* binding */ getMapEncoder),\n/* harmony export */   getNullableCodec: () => (/* binding */ getNullableCodec),\n/* harmony export */   getNullableDecoder: () => (/* binding */ getNullableDecoder),\n/* harmony export */   getNullableEncoder: () => (/* binding */ getNullableEncoder),\n/* harmony export */   getScalarEnumCodec: () => (/* binding */ getScalarEnumCodec),\n/* harmony export */   getScalarEnumDecoder: () => (/* binding */ getScalarEnumDecoder),\n/* harmony export */   getScalarEnumEncoder: () => (/* binding */ getScalarEnumEncoder),\n/* harmony export */   getSetCodec: () => (/* binding */ getSetCodec),\n/* harmony export */   getSetDecoder: () => (/* binding */ getSetDecoder),\n/* harmony export */   getSetEncoder: () => (/* binding */ getSetEncoder),\n/* harmony export */   getStructCodec: () => (/* binding */ getStructCodec),\n/* harmony export */   getStructDecoder: () => (/* binding */ getStructDecoder),\n/* harmony export */   getStructEncoder: () => (/* binding */ getStructEncoder),\n/* harmony export */   getTupleCodec: () => (/* binding */ getTupleCodec),\n/* harmony export */   getTupleDecoder: () => (/* binding */ getTupleDecoder),\n/* harmony export */   getTupleEncoder: () => (/* binding */ getTupleEncoder),\n/* harmony export */   getUnitCodec: () => (/* binding */ getUnitCodec),\n/* harmony export */   getUnitDecoder: () => (/* binding */ getUnitDecoder),\n/* harmony export */   getUnitEncoder: () => (/* binding */ getUnitEncoder)\n/* harmony export */ });\n/* harmony import */ var _solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @solana/codecs-core */ \"(ssr)/../../node_modules/.pnpm/@solana+codecs-core@2.0.0-preview.2/node_modules/@solana/codecs-core/dist/index.node.js\");\n/* harmony import */ var _solana_codecs_numbers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @solana/codecs-numbers */ \"(ssr)/../../node_modules/.pnpm/@solana+codecs-numbers@2.0.0-preview.2/node_modules/@solana/codecs-numbers/dist/index.node.js\");\n/* harmony import */ var _solana_errors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @solana/errors */ \"(ssr)/../../node_modules/.pnpm/@solana+errors@2.0.0-preview.2/node_modules/@solana/errors/dist/index.node.js\");\n\n\n\n\n// src/array.ts\nfunction assertValidNumberOfItemsForCodec(codecDescription, expected, actual) {\n  if (expected !== actual) {\n    throw new _solana_errors__WEBPACK_IMPORTED_MODULE_0__.SolanaError(_solana_errors__WEBPACK_IMPORTED_MODULE_0__.SOLANA_ERROR__CODECS__INVALID_NUMBER_OF_ITEMS, {\n      actual,\n      codecDescription,\n      expected\n    });\n  }\n}\nfunction maxCodecSizes(sizes) {\n  return sizes.reduce(\n    (all, size) => all === null || size === null ? null : Math.max(all, size),\n    0\n  );\n}\nfunction sumCodecSizes(sizes) {\n  return sizes.reduce((all, size) => all === null || size === null ? null : all + size, 0);\n}\nfunction getFixedSize(codec) {\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.isFixedSize)(codec) ? codec.fixedSize : null;\n}\nfunction getMaxSize(codec) {\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.isFixedSize)(codec) ? codec.fixedSize : codec.maxSize ?? null;\n}\n\n// src/array.ts\nfunction getArrayEncoder(item, config = {}) {\n  const size = config.size ?? (0,_solana_codecs_numbers__WEBPACK_IMPORTED_MODULE_2__.getU32Encoder)();\n  const fixedSize = computeArrayLikeCodecSize(size, getFixedSize(item));\n  const maxSize = computeArrayLikeCodecSize(size, getMaxSize(item)) ?? void 0;\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.createEncoder)({\n    ...fixedSize !== null ? { fixedSize } : {\n      getSizeFromValue: (array) => {\n        const prefixSize = typeof size === \"object\" ? (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.getEncodedSize)(array.length, size) : 0;\n        return prefixSize + [...array].reduce((all, value) => all + (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.getEncodedSize)(value, item), 0);\n      },\n      maxSize\n    },\n    write: (array, bytes, offset) => {\n      if (typeof size === \"number\") {\n        assertValidNumberOfItemsForCodec(\"array\", size, array.length);\n      }\n      if (typeof size === \"object\") {\n        offset = size.write(array.length, bytes, offset);\n      }\n      array.forEach((value) => {\n        offset = item.write(value, bytes, offset);\n      });\n      return offset;\n    }\n  });\n}\nfunction getArrayDecoder(item, config = {}) {\n  const size = config.size ?? (0,_solana_codecs_numbers__WEBPACK_IMPORTED_MODULE_2__.getU32Decoder)();\n  const itemSize = getFixedSize(item);\n  const fixedSize = computeArrayLikeCodecSize(size, itemSize);\n  const maxSize = computeArrayLikeCodecSize(size, getMaxSize(item)) ?? void 0;\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.createDecoder)({\n    ...fixedSize !== null ? { fixedSize } : { maxSize },\n    read: (bytes, offset) => {\n      const array = [];\n      if (typeof size === \"object\" && bytes.slice(offset).length === 0) {\n        return [array, offset];\n      }\n      if (size === \"remainder\") {\n        while (offset < bytes.length) {\n          const [value, newOffset2] = item.read(bytes, offset);\n          offset = newOffset2;\n          array.push(value);\n        }\n        return [array, offset];\n      }\n      const [resolvedSize, newOffset] = typeof size === \"number\" ? [size, offset] : size.read(bytes, offset);\n      offset = newOffset;\n      for (let i = 0; i < resolvedSize; i += 1) {\n        const [value, newOffset2] = item.read(bytes, offset);\n        offset = newOffset2;\n        array.push(value);\n      }\n      return [array, offset];\n    }\n  });\n}\nfunction getArrayCodec(item, config = {}) {\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.combineCodec)(getArrayEncoder(item, config), getArrayDecoder(item, config));\n}\nfunction computeArrayLikeCodecSize(size, itemSize) {\n  if (typeof size !== \"number\")\n    return null;\n  if (size === 0)\n    return 0;\n  return itemSize === null ? null : itemSize * size;\n}\nfunction getBitArrayEncoder(size, config = {}) {\n  const parsedConfig = typeof config === \"boolean\" ? { backward: config } : config;\n  const backward = parsedConfig.backward ?? false;\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.createEncoder)({\n    fixedSize: size,\n    write(value, bytes, offset) {\n      const bytesToAdd = [];\n      for (let i = 0; i < size; i += 1) {\n        let byte = 0;\n        for (let j = 0; j < 8; j += 1) {\n          const feature = Number(value[i * 8 + j] ?? 0);\n          byte |= feature << (backward ? j : 7 - j);\n        }\n        if (backward) {\n          bytesToAdd.unshift(byte);\n        } else {\n          bytesToAdd.push(byte);\n        }\n      }\n      bytes.set(bytesToAdd, offset);\n      return size;\n    }\n  });\n}\nfunction getBitArrayDecoder(size, config = {}) {\n  const parsedConfig = typeof config === \"boolean\" ? { backward: config } : config;\n  const backward = parsedConfig.backward ?? false;\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.createDecoder)({\n    fixedSize: size,\n    read(bytes, offset) {\n      (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.assertByteArrayHasEnoughBytesForCodec)(\"bitArray\", size, bytes, offset);\n      const booleans = [];\n      let slice = bytes.slice(offset, offset + size);\n      slice = backward ? slice.reverse() : slice;\n      slice.forEach((byte) => {\n        for (let i = 0; i < 8; i += 1) {\n          if (backward) {\n            booleans.push(Boolean(byte & 1));\n            byte >>= 1;\n          } else {\n            booleans.push(Boolean(byte & 128));\n            byte <<= 1;\n          }\n        }\n      });\n      return [booleans, offset + size];\n    }\n  });\n}\nfunction getBitArrayCodec(size, config = {}) {\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.combineCodec)(getBitArrayEncoder(size, config), getBitArrayDecoder(size, config));\n}\nfunction getBooleanEncoder(config = {}) {\n  const size = config.size ?? (0,_solana_codecs_numbers__WEBPACK_IMPORTED_MODULE_2__.getU8Encoder)();\n  (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.assertIsFixedSize)(size);\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.mapEncoder)(size, (value) => value ? 1 : 0);\n}\nfunction getBooleanDecoder(config = {}) {\n  const size = config.size ?? (0,_solana_codecs_numbers__WEBPACK_IMPORTED_MODULE_2__.getU8Decoder)();\n  (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.assertIsFixedSize)(size);\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.mapDecoder)(size, (value) => Number(value) === 1);\n}\nfunction getBooleanCodec(config = {}) {\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.combineCodec)(getBooleanEncoder(config), getBooleanDecoder(config));\n}\nfunction getBytesEncoder(config = {}) {\n  const size = config.size ?? \"variable\";\n  const byteEncoder = (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.createEncoder)({\n    getSizeFromValue: (value) => value.length,\n    write: (value, bytes, offset) => {\n      bytes.set(value, offset);\n      return offset + value.length;\n    }\n  });\n  if (size === \"variable\") {\n    return byteEncoder;\n  }\n  if (typeof size === \"number\") {\n    return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.fixEncoder)(byteEncoder, size);\n  }\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.createEncoder)({\n    getSizeFromValue: (value) => (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.getEncodedSize)(value.length, size) + value.length,\n    write: (value, bytes, offset) => {\n      offset = size.write(value.length, bytes, offset);\n      return byteEncoder.write(value, bytes, offset);\n    }\n  });\n}\nfunction getBytesDecoder(config = {}) {\n  const size = config.size ?? \"variable\";\n  const byteDecoder = (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.createDecoder)({\n    read: (bytes, offset) => {\n      const slice = bytes.slice(offset);\n      return [slice, offset + slice.length];\n    }\n  });\n  if (size === \"variable\") {\n    return byteDecoder;\n  }\n  if (typeof size === \"number\") {\n    return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.fixDecoder)(byteDecoder, size);\n  }\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.createDecoder)({\n    read: (bytes, offset) => {\n      (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.assertByteArrayIsNotEmptyForCodec)(\"bytes\", bytes, offset);\n      const [lengthBigInt, lengthOffset] = size.read(bytes, offset);\n      const length = Number(lengthBigInt);\n      offset = lengthOffset;\n      const contentBytes = bytes.slice(offset, offset + length);\n      (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.assertByteArrayHasEnoughBytesForCodec)(\"bytes\", length, contentBytes);\n      const [value, contentOffset] = byteDecoder.read(contentBytes, 0);\n      offset += contentOffset;\n      return [value, offset];\n    }\n  });\n}\nfunction getBytesCodec(config = {}) {\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.combineCodec)(getBytesEncoder(config), getBytesDecoder(config));\n}\nfunction getDataEnumEncoder(variants, config = {}) {\n  const prefix = config.size ?? (0,_solana_codecs_numbers__WEBPACK_IMPORTED_MODULE_2__.getU8Encoder)();\n  const fixedSize = getDataEnumFixedSize(variants, prefix);\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.createEncoder)({\n    ...fixedSize !== null ? { fixedSize } : {\n      getSizeFromValue: (variant) => {\n        const discriminator = getVariantDiscriminator(variants, variant);\n        const variantEncoder = variants[discriminator][1];\n        return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.getEncodedSize)(discriminator, prefix) + (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.getEncodedSize)(variant, variantEncoder);\n      },\n      maxSize: getDataEnumMaxSize(variants, prefix)\n    },\n    write: (variant, bytes, offset) => {\n      const discriminator = getVariantDiscriminator(variants, variant);\n      offset = prefix.write(discriminator, bytes, offset);\n      const variantEncoder = variants[discriminator][1];\n      return variantEncoder.write(variant, bytes, offset);\n    }\n  });\n}\nfunction getDataEnumDecoder(variants, config = {}) {\n  const prefix = config.size ?? (0,_solana_codecs_numbers__WEBPACK_IMPORTED_MODULE_2__.getU8Decoder)();\n  const fixedSize = getDataEnumFixedSize(variants, prefix);\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.createDecoder)({\n    ...fixedSize !== null ? { fixedSize } : { maxSize: getDataEnumMaxSize(variants, prefix) },\n    read: (bytes, offset) => {\n      (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.assertByteArrayIsNotEmptyForCodec)(\"dataEnum\", bytes, offset);\n      const [discriminator, dOffset] = prefix.read(bytes, offset);\n      offset = dOffset;\n      const variantField = variants[Number(discriminator)] ?? null;\n      if (!variantField) {\n        throw new _solana_errors__WEBPACK_IMPORTED_MODULE_0__.SolanaError(_solana_errors__WEBPACK_IMPORTED_MODULE_0__.SOLANA_ERROR__CODECS__ENUM_DISCRIMINATOR_OUT_OF_RANGE, {\n          discriminator,\n          maxRange: variants.length - 1,\n          minRange: 0\n        });\n      }\n      const [variant, vOffset] = variantField[1].read(bytes, offset);\n      offset = vOffset;\n      return [{ __kind: variantField[0], ...variant ?? {} }, offset];\n    }\n  });\n}\nfunction getDataEnumCodec(variants, config = {}) {\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.combineCodec)(\n    getDataEnumEncoder(variants, config),\n    getDataEnumDecoder(variants, config)\n  );\n}\nfunction getDataEnumFixedSize(variants, prefix) {\n  if (variants.length === 0)\n    return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.isFixedSize)(prefix) ? prefix.fixedSize : null;\n  if (!(0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.isFixedSize)(variants[0][1]))\n    return null;\n  const variantSize = variants[0][1].fixedSize;\n  const sameSizedVariants = variants.every(\n    (variant) => (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.isFixedSize)(variant[1]) && variant[1].fixedSize === variantSize\n  );\n  if (!sameSizedVariants)\n    return null;\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.isFixedSize)(prefix) ? prefix.fixedSize + variantSize : null;\n}\nfunction getDataEnumMaxSize(variants, prefix) {\n  const maxVariantSize = maxCodecSizes(variants.map(([, codec]) => getMaxSize(codec)));\n  return sumCodecSizes([getMaxSize(prefix), maxVariantSize]) ?? void 0;\n}\nfunction getVariantDiscriminator(variants, variant) {\n  const discriminator = variants.findIndex(([key]) => variant.__kind === key);\n  if (discriminator < 0) {\n    throw new _solana_errors__WEBPACK_IMPORTED_MODULE_0__.SolanaError(_solana_errors__WEBPACK_IMPORTED_MODULE_0__.SOLANA_ERROR__CODECS__INVALID_DATA_ENUM_VARIANT, {\n      value: variant.__kind,\n      variants: variants.map(([key]) => key)\n    });\n  }\n  return discriminator;\n}\nfunction getTupleEncoder(items) {\n  const fixedSize = sumCodecSizes(items.map(getFixedSize));\n  const maxSize = sumCodecSizes(items.map(getMaxSize)) ?? void 0;\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.createEncoder)({\n    ...fixedSize === null ? {\n      getSizeFromValue: (value) => items.map((item, index) => (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.getEncodedSize)(value[index], item)).reduce((all, one) => all + one, 0),\n      maxSize\n    } : { fixedSize },\n    write: (value, bytes, offset) => {\n      assertValidNumberOfItemsForCodec(\"tuple\", items.length, value.length);\n      items.forEach((item, index) => {\n        offset = item.write(value[index], bytes, offset);\n      });\n      return offset;\n    }\n  });\n}\nfunction getTupleDecoder(items) {\n  const fixedSize = sumCodecSizes(items.map(getFixedSize));\n  const maxSize = sumCodecSizes(items.map(getMaxSize)) ?? void 0;\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.createDecoder)({\n    ...fixedSize === null ? { maxSize } : { fixedSize },\n    read: (bytes, offset) => {\n      const values = [];\n      items.forEach((item) => {\n        const [newValue, newOffset] = item.read(bytes, offset);\n        values.push(newValue);\n        offset = newOffset;\n      });\n      return [values, offset];\n    }\n  });\n}\nfunction getTupleCodec(items) {\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.combineCodec)(\n    getTupleEncoder(items),\n    getTupleDecoder(items)\n  );\n}\n\n// src/map.ts\nfunction getMapEncoder(key, value, config = {}) {\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.mapEncoder)(\n    getArrayEncoder(getTupleEncoder([key, value]), config),\n    (map) => [...map.entries()]\n  );\n}\nfunction getMapDecoder(key, value, config = {}) {\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.mapDecoder)(\n    getArrayDecoder(getTupleDecoder([key, value]), config),\n    (entries) => new Map(entries)\n  );\n}\nfunction getMapCodec(key, value, config = {}) {\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.combineCodec)(getMapEncoder(key, value, config), getMapDecoder(key, value, config));\n}\nfunction getNullableEncoder(item, config = {}) {\n  const prefix = config.prefix ?? (0,_solana_codecs_numbers__WEBPACK_IMPORTED_MODULE_2__.getU8Encoder)();\n  const fixed = config.fixed ?? false;\n  const isZeroSizeItem = (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.isFixedSize)(item) && (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.isFixedSize)(prefix) && item.fixedSize === 0;\n  if (fixed || isZeroSizeItem) {\n    (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.assertIsFixedSize)(item);\n    (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.assertIsFixedSize)(prefix);\n    const fixedSize = prefix.fixedSize + item.fixedSize;\n    return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.createEncoder)({\n      fixedSize,\n      write: (option, bytes, offset) => {\n        const prefixOffset = prefix.write(Number(option !== null), bytes, offset);\n        if (option !== null) {\n          item.write(option, bytes, prefixOffset);\n        }\n        return offset + fixedSize;\n      }\n    });\n  }\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.createEncoder)({\n    getSizeFromValue: (option) => (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.getEncodedSize)(Number(option !== null), prefix) + (option !== null ? (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.getEncodedSize)(option, item) : 0),\n    maxSize: sumCodecSizes([prefix, item].map(getMaxSize)) ?? void 0,\n    write: (option, bytes, offset) => {\n      offset = prefix.write(Number(option !== null), bytes, offset);\n      if (option !== null) {\n        offset = item.write(option, bytes, offset);\n      }\n      return offset;\n    }\n  });\n}\nfunction getNullableDecoder(item, config = {}) {\n  const prefix = config.prefix ?? (0,_solana_codecs_numbers__WEBPACK_IMPORTED_MODULE_2__.getU8Decoder)();\n  const fixed = config.fixed ?? false;\n  let fixedSize = null;\n  const isZeroSizeItem = (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.isFixedSize)(item) && (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.isFixedSize)(prefix) && item.fixedSize === 0;\n  if (fixed || isZeroSizeItem) {\n    (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.assertIsFixedSize)(item);\n    (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.assertIsFixedSize)(prefix);\n    fixedSize = prefix.fixedSize + item.fixedSize;\n  }\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.createDecoder)({\n    ...fixedSize === null ? { maxSize: sumCodecSizes([prefix, item].map(getMaxSize)) ?? void 0 } : { fixedSize },\n    read: (bytes, offset) => {\n      if (bytes.length - offset <= 0) {\n        return [null, offset];\n      }\n      const [isSome, prefixOffset] = prefix.read(bytes, offset);\n      if (isSome === 0) {\n        return [null, fixedSize !== null ? offset + fixedSize : prefixOffset];\n      }\n      const [value, newOffset] = item.read(bytes, prefixOffset);\n      return [value, fixedSize !== null ? offset + fixedSize : newOffset];\n    }\n  });\n}\nfunction getNullableCodec(item, config = {}) {\n  const configCast = config;\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.combineCodec)(getNullableEncoder(item, configCast), getNullableDecoder(item, configCast));\n}\nfunction getScalarEnumEncoder(constructor, config = {}) {\n  const prefix = config.size ?? (0,_solana_codecs_numbers__WEBPACK_IMPORTED_MODULE_2__.getU8Encoder)();\n  const { minRange, maxRange, allStringInputs, enumKeys, enumValues } = getScalarEnumStats(constructor);\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.mapEncoder)(prefix, (value) => {\n    const isInvalidNumber = typeof value === \"number\" && (value < minRange || value > maxRange);\n    const isInvalidString = typeof value === \"string\" && !allStringInputs.includes(value);\n    if (isInvalidNumber || isInvalidString) {\n      throw new _solana_errors__WEBPACK_IMPORTED_MODULE_0__.SolanaError(_solana_errors__WEBPACK_IMPORTED_MODULE_0__.SOLANA_ERROR__CODECS__INVALID_SCALAR_ENUM_VARIANT, {\n        maxRange,\n        minRange,\n        value,\n        variants: allStringInputs\n      });\n    }\n    if (typeof value === \"number\")\n      return value;\n    const valueIndex = enumValues.indexOf(value);\n    if (valueIndex >= 0)\n      return valueIndex;\n    return enumKeys.indexOf(value);\n  });\n}\nfunction getScalarEnumDecoder(constructor, config = {}) {\n  const prefix = config.size ?? (0,_solana_codecs_numbers__WEBPACK_IMPORTED_MODULE_2__.getU8Decoder)();\n  const { minRange, maxRange, enumKeys } = getScalarEnumStats(constructor);\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.mapDecoder)(prefix, (value) => {\n    const valueAsNumber = Number(value);\n    if (valueAsNumber < minRange || valueAsNumber > maxRange) {\n      throw new _solana_errors__WEBPACK_IMPORTED_MODULE_0__.SolanaError(_solana_errors__WEBPACK_IMPORTED_MODULE_0__.SOLANA_ERROR__CODECS__ENUM_DISCRIMINATOR_OUT_OF_RANGE, {\n        discriminator: valueAsNumber,\n        maxRange,\n        minRange\n      });\n    }\n    return constructor[enumKeys[valueAsNumber]];\n  });\n}\nfunction getScalarEnumCodec(constructor, config = {}) {\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.combineCodec)(getScalarEnumEncoder(constructor, config), getScalarEnumDecoder(constructor, config));\n}\nfunction getScalarEnumStats(constructor) {\n  const numericValues = Object.values(constructor).filter((v) => typeof v === \"number\");\n  const deduplicatedConstructor = Object.fromEntries(\n    Object.entries(constructor).slice(numericValues.length)\n  );\n  const enumKeys = Object.keys(deduplicatedConstructor);\n  const enumValues = Object.values(deduplicatedConstructor);\n  const minRange = 0;\n  const maxRange = enumValues.length - 1;\n  const allStringInputs = [\n    .../* @__PURE__ */ new Set([...enumKeys, ...enumValues.filter((v) => typeof v === \"string\")])\n  ];\n  return {\n    allStringInputs,\n    enumKeys,\n    enumValues,\n    maxRange,\n    minRange\n  };\n}\nfunction getSetEncoder(item, config = {}) {\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.mapEncoder)(getArrayEncoder(item, config), (set) => [...set]);\n}\nfunction getSetDecoder(item, config = {}) {\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.mapDecoder)(getArrayDecoder(item, config), (entries) => new Set(entries));\n}\nfunction getSetCodec(item, config = {}) {\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.combineCodec)(getSetEncoder(item, config), getSetDecoder(item, config));\n}\nfunction getStructEncoder(fields) {\n  const fieldCodecs = fields.map(([, codec]) => codec);\n  const fixedSize = sumCodecSizes(fieldCodecs.map(getFixedSize));\n  const maxSize = sumCodecSizes(fieldCodecs.map(getMaxSize)) ?? void 0;\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.createEncoder)({\n    ...fixedSize === null ? {\n      getSizeFromValue: (value) => fields.map(([key, codec]) => (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.getEncodedSize)(value[key], codec)).reduce((all, one) => all + one, 0),\n      maxSize\n    } : { fixedSize },\n    write: (struct, bytes, offset) => {\n      fields.forEach(([key, codec]) => {\n        offset = codec.write(struct[key], bytes, offset);\n      });\n      return offset;\n    }\n  });\n}\nfunction getStructDecoder(fields) {\n  const fieldCodecs = fields.map(([, codec]) => codec);\n  const fixedSize = sumCodecSizes(fieldCodecs.map(getFixedSize));\n  const maxSize = sumCodecSizes(fieldCodecs.map(getMaxSize)) ?? void 0;\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.createDecoder)({\n    ...fixedSize === null ? { maxSize } : { fixedSize },\n    read: (bytes, offset) => {\n      const struct = {};\n      fields.forEach(([key, codec]) => {\n        const [value, newOffset] = codec.read(bytes, offset);\n        offset = newOffset;\n        struct[key] = value;\n      });\n      return [struct, offset];\n    }\n  });\n}\nfunction getStructCodec(fields) {\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.combineCodec)(\n    getStructEncoder(fields),\n    getStructDecoder(fields)\n  );\n}\nfunction getUnitEncoder() {\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.createEncoder)({\n    fixedSize: 0,\n    write: (_value, _bytes, offset) => offset\n  });\n}\nfunction getUnitDecoder() {\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.createDecoder)({\n    fixedSize: 0,\n    read: (_bytes, offset) => [void 0, offset]\n  });\n}\nfunction getUnitCodec() {\n  return (0,_solana_codecs_core__WEBPACK_IMPORTED_MODULE_1__.combineCodec)(getUnitEncoder(), getUnitDecoder());\n}\n\n\n//# sourceMappingURL=out.js.map\n//# sourceMappingURL=index.node.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0Bzb2xhbmErY29kZWNzLWRhdGEtc3RydWN0dXJlc0AyLjAuMC1wcmV2aWV3LjIvbm9kZV9tb2R1bGVzL0Bzb2xhbmEvY29kZWNzLWRhdGEtc3RydWN0dXJlcy9kaXN0L2luZGV4Lm5vZGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUEyUDtBQUN6SjtBQUNxSjs7QUFFdlA7QUFDQTtBQUNBO0FBQ0EsY0FBYyx1REFBVyxDQUFDLHlGQUE2QztBQUN2RTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxnRUFBVztBQUNwQjtBQUNBO0FBQ0EsU0FBUyxnRUFBVztBQUNwQjs7QUFFQTtBQUNBLDBDQUEwQztBQUMxQyw4QkFBOEIscUVBQWE7QUFDM0M7QUFDQTtBQUNBLFNBQVMsa0VBQWE7QUFDdEIsOEJBQThCLFlBQVk7QUFDMUM7QUFDQSxzREFBc0QsbUVBQWM7QUFDcEUsb0VBQW9FLG1FQUFjO0FBQ2xGLE9BQU87QUFDUDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLDBDQUEwQztBQUMxQyw4QkFBOEIscUVBQWE7QUFDM0M7QUFDQTtBQUNBO0FBQ0EsU0FBUyxrRUFBYTtBQUN0Qiw4QkFBOEIsWUFBWSxJQUFJLFNBQVM7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLGtCQUFrQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSx3Q0FBd0M7QUFDeEMsU0FB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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxTQUFTLGlFQUFZO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLGtFQUFhO0FBQ3RCO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLFNBQVMsa0VBQWE7QUFDdEI7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsU0FBUyxpRUFBWTtBQUNyQjs7QUFFNHBCO0FBQzVwQjtBQUNBIiwic291cmNlcyI6WyJEOlxcTXVsdGlBZ2VudFdyaXRlcnpcXG5vZGVfbW9kdWxlc1xcLnBucG1cXEBzb2xhbmErY29kZWNzLWRhdGEtc3RydWN0dXJlc0AyLjAuMC1wcmV2aWV3LjJcXG5vZGVfbW9kdWxlc1xcQHNvbGFuYVxcY29kZWNzLWRhdGEtc3RydWN0dXJlc1xcZGlzdFxcaW5kZXgubm9kZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVFbmNvZGVyLCBnZXRFbmNvZGVkU2l6ZSwgY3JlYXRlRGVjb2RlciwgY29tYmluZUNvZGVjLCBhc3NlcnRCeXRlQXJyYXlIYXNFbm91Z2hCeXRlc0ZvckNvZGVjLCBhc3NlcnRJc0ZpeGVkU2l6ZSwgbWFwRW5jb2RlciwgbWFwRGVjb2RlciwgZml4RW5jb2RlciwgZml4RGVjb2RlciwgYXNzZXJ0Qnl0ZUFycmF5SXNOb3RFbXB0eUZvckNvZGVjLCBpc0ZpeGVkU2l6ZSB9IGZyb20gJ0Bzb2xhbmEvY29kZWNzLWNvcmUnO1xuaW1wb3J0IHsgZ2V0VTMyRW5jb2RlciwgZ2V0VTMyRGVjb2RlciwgZ2V0VThFbmNvZGVyLCBnZXRVOERlY29kZXIgfSBmcm9tICdAc29sYW5hL2NvZGVjcy1udW1iZXJzJztcbmltcG9ydCB7IFNvbGFuYUVycm9yLCBTT0xBTkFfRVJST1JfX0NPREVDU19fSU5WQUxJRF9OVU1CRVJfT0ZfSVRFTVMsIFNPTEFOQV9FUlJPUl9fQ09ERUNTX19FTlVNX0RJU0NSSU1JTkFUT1JfT1VUX09GX1JBTkdFLCBTT0xBTkFfRVJST1JfX0NPREVDU19fSU5WQUxJRF9EQVRBX0VOVU1fVkFSSUFOVCwgU09MQU5BX0VSUk9SX19DT0RFQ1NfX0lOVkFMSURfU0NBTEFSX0VOVU1fVkFSSUFOVCB9IGZyb20gJ0Bzb2xhbmEvZXJyb3JzJztcblxuLy8gc3JjL2FycmF5LnRzXG5mdW5jdGlvbiBhc3NlcnRWYWxpZE51bWJlck9mSXRlbXNGb3JDb2RlYyhjb2RlY0Rlc2NyaXB0aW9uLCBleHBlY3RlZCwgYWN0dWFsKSB7XG4gIGlmIChleHBlY3RlZCAhPT0gYWN0dWFsKSB7XG4gICAgdGhyb3cgbmV3IFNvbGFuYUVycm9yKFNPTEFOQV9FUlJPUl9fQ09ERUNTX19JTlZBTElEX05VTUJFUl9PRl9JVEVNUywge1xuICAgICAgYWN0dWFsLFxuICAgICAgY29kZWNEZXNjcmlwdGlvbixcbiAgICAgIGV4cGVjdGVkXG4gICAgfSk7XG4gIH1cbn1cbmZ1bmN0aW9uIG1heENvZGVjU2l6ZXMoc2l6ZXMpIHtcbiAgcmV0dXJuIHNpemVzLnJlZHVjZShcbiAgICAoYWxsLCBzaXplKSA9PiBhbGwgPT09IG51bGwgfHwgc2l6ZSA9PT0gbnVsbCA/IG51bGwgOiBNYXRoLm1heChhbGwsIHNpemUpLFxuICAgIDBcbiAgKTtcbn1cbmZ1bmN0aW9uIHN1bUNvZGVjU2l6ZXMoc2l6ZXMpIHtcbiAgcmV0dXJuIHNpemVzLnJlZHVjZSgoYWxsLCBzaXplKSA9PiBhbGwgPT09IG51bGwgfHwgc2l6ZSA9PT0gbnVsbCA/IG51bGwgOiBhbGwgKyBzaXplLCAwKTtcbn1cbmZ1bmN0aW9uIGdldEZpeGVkU2l6ZShjb2RlYykge1xuICByZXR1cm4gaXNGaXhlZFNpemUoY29kZWMpID8gY29kZWMuZml4ZWRTaXplIDogbnVsbDtcbn1cbmZ1bmN0aW9uIGdldE1heFNpemUoY29kZWMpIHtcbiAgcmV0dXJuIGlzRml4ZWRTaXplKGNvZGVjKSA/IGNvZGVjLmZpeGVkU2l6ZSA6IGNvZGVjLm1heFNpemUgPz8gbnVsbDtcbn1cblxuLy8gc3JjL2FycmF5LnRzXG5mdW5jdGlvbiBnZXRBcnJheUVuY29kZXIoaXRlbSwgY29uZmlnID0ge30pIHtcbiAgY29uc3Qgc2l6ZSA9IGNvbmZpZy5zaXplID8/IGdldFUzMkVuY29kZXIoKTtcbiAgY29uc3QgZml4ZWRTaXplID0gY29tcHV0ZUFycmF5TGlrZUNvZGVjU2l6ZShzaXplLCBnZXRGaXhlZFNpemUoaXRlbSkpO1xuICBjb25zdCBtYXhTaXplID0gY29tcHV0ZUFycmF5TGlrZUNvZGVjU2l6ZShzaXplLCBnZXRNYXhTaXplKGl0ZW0pKSA/PyB2b2lkIDA7XG4gIHJldHVybiBjcmVhdGVFbmNvZGVyKHtcbiAgICAuLi5maXhlZFNpemUgIT09IG51bGwgPyB7IGZpeGVkU2l6ZSB9IDoge1xuICAgICAgZ2V0U2l6ZUZyb21WYWx1ZTogKGFycmF5KSA9PiB7XG4gICAgICAgIGNvbnN0IHByZWZpeFNpemUgPSB0eXBlb2Ygc2l6ZSA9PT0gXCJvYmplY3RcIiA/IGdldEVuY29kZWRTaXplKGFycmF5Lmxlbmd0aCwgc2l6ZSkgOiAwO1xuICAgICAgICByZXR1cm4gcHJlZml4U2l6ZSArIFsuLi5hcnJheV0ucmVkdWNlKChhbGwsIHZhbHVlKSA9PiBhbGwgKyBnZXRFbmNvZGVkU2l6ZSh2YWx1ZSwgaXRlbSksIDApO1xuICAgICAgfSxcbiAgICAgIG1heFNpemVcbiAgICB9LFxuICAgIHdyaXRlOiAoYXJyYXksIGJ5dGVzLCBvZmZzZXQpID0+IHtcbiAgICAgIGlmICh0eXBlb2Ygc2l6ZSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICBhc3NlcnRWYWxpZE51bWJlck9mSXRlbXNGb3JDb2RlYyhcImFycmF5XCIsIHNpemUsIGFycmF5Lmxlbmd0aCk7XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIHNpemUgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgb2Zmc2V0ID0gc2l6ZS53cml0ZShhcnJheS5sZW5ndGgsIGJ5dGVzLCBvZmZzZXQpO1xuICAgICAgfVxuICAgICAgYXJyYXkuZm9yRWFjaCgodmFsdWUpID0+IHtcbiAgICAgICAgb2Zmc2V0ID0gaXRlbS53cml0ZSh2YWx1ZSwgYnl0ZXMsIG9mZnNldCk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBvZmZzZXQ7XG4gICAgfVxuICB9KTtcbn1cbmZ1bmN0aW9uIGdldEFycmF5RGVjb2RlcihpdGVtLCBjb25maWcgPSB7fSkge1xuICBjb25zdCBzaXplID0gY29uZmlnLnNpemUgPz8gZ2V0VTMyRGVjb2RlcigpO1xuICBjb25zdCBpdGVtU2l6ZSA9IGdldEZpeGVkU2l6ZShpdGVtKTtcbiAgY29uc3QgZml4ZWRTaXplID0gY29tcHV0ZUFycmF5TGlrZUNvZGVjU2l6ZShzaXplLCBpdGVtU2l6ZSk7XG4gIGNvbnN0IG1heFNpemUgPSBjb21wdXRlQXJyYXlMaWtlQ29kZWNTaXplKHNpemUsIGdldE1heFNpemUoaXRlbSkpID8/IHZvaWQgMDtcbiAgcmV0dXJuIGNyZWF0ZURlY29kZXIoe1xuICAgIC4uLmZpeGVkU2l6ZSAhPT0gbnVsbCA/IHsgZml4ZWRTaXplIH0gOiB7IG1heFNpemUgfSxcbiAgICByZWFkOiAoYnl0ZXMsIG9mZnNldCkgPT4ge1xuICAgICAgY29uc3QgYXJyYXkgPSBbXTtcbiAgICAgIGlmICh0eXBlb2Ygc2l6ZSA9PT0gXCJvYmplY3RcIiAmJiBieXRlcy5zbGljZShvZmZzZXQpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gW2FycmF5LCBvZmZzZXRdO1xuICAgICAgfVxuICAgICAgaWYgKHNpemUgPT09IFwicmVtYWluZGVyXCIpIHtcbiAgICAgICAgd2hpbGUgKG9mZnNldCA8IGJ5dGVzLmxlbmd0aCkge1xuICAgICAgICAgIGNvbnN0IFt2YWx1ZSwgbmV3T2Zmc2V0Ml0gPSBpdGVtLnJlYWQoYnl0ZXMsIG9mZnNldCk7XG4gICAgICAgICAgb2Zmc2V0ID0gbmV3T2Zmc2V0MjtcbiAgICAgICAgICBhcnJheS5wdXNoKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW2FycmF5LCBvZmZzZXRdO1xuICAgICAgfVxuICAgICAgY29uc3QgW3Jlc29sdmVkU2l6ZSwgbmV3T2Zmc2V0XSA9IHR5cGVvZiBzaXplID09PSBcIm51bWJlclwiID8gW3NpemUsIG9mZnNldF0gOiBzaXplLnJlYWQoYnl0ZXMsIG9mZnNldCk7XG4gICAgICBvZmZzZXQgPSBuZXdPZmZzZXQ7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlc29sdmVkU2l6ZTsgaSArPSAxKSB7XG4gICAgICAgIGNvbnN0IFt2YWx1ZSwgbmV3T2Zmc2V0Ml0gPSBpdGVtLnJlYWQoYnl0ZXMsIG9mZnNldCk7XG4gICAgICAgIG9mZnNldCA9IG5ld09mZnNldDI7XG4gICAgICAgIGFycmF5LnB1c2godmFsdWUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFthcnJheSwgb2Zmc2V0XTtcbiAgICB9XG4gIH0pO1xufVxuZnVuY3Rpb24gZ2V0QXJyYXlDb2RlYyhpdGVtLCBjb25maWcgPSB7fSkge1xuICByZXR1cm4gY29tYmluZUNvZGVjKGdldEFycmF5RW5jb2RlcihpdGVtLCBjb25maWcpLCBnZXRBcnJheURlY29kZXIoaXRlbSwgY29uZmlnKSk7XG59XG5mdW5jdGlvbiBjb21wdXRlQXJyYXlMaWtlQ29kZWNTaXplKHNpemUsIGl0ZW1TaXplKSB7XG4gIGlmICh0eXBlb2Ygc2l6ZSAhPT0gXCJudW1iZXJcIilcbiAgICByZXR1cm4gbnVsbDtcbiAgaWYgKHNpemUgPT09IDApXG4gICAgcmV0dXJuIDA7XG4gIHJldHVybiBpdGVtU2l6ZSA9PT0gbnVsbCA/IG51bGwgOiBpdGVtU2l6ZSAqIHNpemU7XG59XG5mdW5jdGlvbiBnZXRCaXRBcnJheUVuY29kZXIoc2l6ZSwgY29uZmlnID0ge30pIHtcbiAgY29uc3QgcGFyc2VkQ29uZmlnID0gdHlwZW9mIGNvbmZpZyA9PT0gXCJib29sZWFuXCIgPyB7IGJhY2t3YXJkOiBjb25maWcgfSA6IGNvbmZpZztcbiAgY29uc3QgYmFja3dhcmQgPSBwYXJzZWRDb25maWcuYmFja3dhcmQgPz8gZmFsc2U7XG4gIHJldHVybiBjcmVhdGVFbmNvZGVyKHtcbiAgICBmaXhlZFNpemU6IHNpemUsXG4gICAgd3JpdGUodmFsdWUsIGJ5dGVzLCBvZmZzZXQpIHtcbiAgICAgIGNvbnN0IGJ5dGVzVG9BZGQgPSBbXTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2l6ZTsgaSArPSAxKSB7XG4gICAgICAgIGxldCBieXRlID0gMDtcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCA4OyBqICs9IDEpIHtcbiAgICAgICAgICBjb25zdCBmZWF0dXJlID0gTnVtYmVyKHZhbHVlW2kgKiA4ICsgal0gPz8gMCk7XG4gICAgICAgICAgYnl0ZSB8PSBmZWF0dXJlIDw8IChiYWNrd2FyZCA/IGogOiA3IC0gaik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGJhY2t3YXJkKSB7XG4gICAgICAgICAgYnl0ZXNUb0FkZC51bnNoaWZ0KGJ5dGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGJ5dGVzVG9BZGQucHVzaChieXRlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYnl0ZXMuc2V0KGJ5dGVzVG9BZGQsIG9mZnNldCk7XG4gICAgICByZXR1cm4gc2l6ZTtcbiAgICB9XG4gIH0pO1xufVxuZnVuY3Rpb24gZ2V0Qml0QXJyYXlEZWNvZGVyKHNpemUsIGNvbmZpZyA9IHt9KSB7XG4gIGNvbnN0IHBhcnNlZENvbmZpZyA9IHR5cGVvZiBjb25maWcgPT09IFwiYm9vbGVhblwiID8geyBiYWNrd2FyZDogY29uZmlnIH0gOiBjb25maWc7XG4gIGNvbnN0IGJhY2t3YXJkID0gcGFyc2VkQ29uZmlnLmJhY2t3YXJkID8/IGZhbHNlO1xuICByZXR1cm4gY3JlYXRlRGVjb2Rlcih7XG4gICAgZml4ZWRTaXplOiBzaXplLFxuICAgIHJlYWQoYnl0ZXMsIG9mZnNldCkge1xuICAgICAgYXNzZXJ0Qnl0ZUFycmF5SGFzRW5vdWdoQnl0ZXNGb3JDb2RlYyhcImJpdEFycmF5XCIsIHNpemUsIGJ5dGVzLCBvZmZzZXQpO1xuICAgICAgY29uc3QgYm9vbGVhbnMgPSBbXTtcbiAgICAgIGxldCBzbGljZSA9IGJ5dGVzLnNsaWNlKG9mZnNldCwgb2Zmc2V0ICsgc2l6ZSk7XG4gICAgICBzbGljZSA9IGJhY2t3YXJkID8gc2xpY2UucmV2ZXJzZSgpIDogc2xpY2U7XG4gICAgICBzbGljZS5mb3JFYWNoKChieXRlKSA9PiB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgODsgaSArPSAxKSB7XG4gICAgICAgICAgaWYgKGJhY2t3YXJkKSB7XG4gICAgICAgICAgICBib29sZWFucy5wdXNoKEJvb2xlYW4oYnl0ZSAmIDEpKTtcbiAgICAgICAgICAgIGJ5dGUgPj49IDE7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGJvb2xlYW5zLnB1c2goQm9vbGVhbihieXRlICYgMTI4KSk7XG4gICAgICAgICAgICBieXRlIDw8PSAxO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gW2Jvb2xlYW5zLCBvZmZzZXQgKyBzaXplXTtcbiAgICB9XG4gIH0pO1xufVxuZnVuY3Rpb24gZ2V0Qml0QXJyYXlDb2RlYyhzaXplLCBjb25maWcgPSB7fSkge1xuICByZXR1cm4gY29tYmluZUNvZGVjKGdldEJpdEFycmF5RW5jb2RlcihzaXplLCBjb25maWcpLCBnZXRCaXRBcnJheURlY29kZXIoc2l6ZSwgY29uZmlnKSk7XG59XG5mdW5jdGlvbiBnZXRCb29sZWFuRW5jb2Rlcihjb25maWcgPSB7fSkge1xuICBjb25zdCBzaXplID0gY29uZmlnLnNpemUgPz8gZ2V0VThFbmNvZGVyKCk7XG4gIGFzc2VydElzRml4ZWRTaXplKHNpemUpO1xuICByZXR1cm4gbWFwRW5jb2RlcihzaXplLCAodmFsdWUpID0+IHZhbHVlID8gMSA6IDApO1xufVxuZnVuY3Rpb24gZ2V0Qm9vbGVhbkRlY29kZXIoY29uZmlnID0ge30pIHtcbiAgY29uc3Qgc2l6ZSA9IGNvbmZpZy5zaXplID8/IGdldFU4RGVjb2RlcigpO1xuICBhc3NlcnRJc0ZpeGVkU2l6ZShzaXplKTtcbiAgcmV0dXJuIG1hcERlY29kZXIoc2l6ZSwgKHZhbHVlKSA9PiBOdW1iZXIodmFsdWUpID09PSAxKTtcbn1cbmZ1bmN0aW9uIGdldEJvb2xlYW5Db2RlYyhjb25maWcgPSB7fSkge1xuICByZXR1cm4gY29tYmluZUNvZGVjKGdldEJvb2xlYW5FbmNvZGVyKGNvbmZpZyksIGdldEJvb2xlYW5EZWNvZGVyKGNvbmZpZykpO1xufVxuZnVuY3Rpb24gZ2V0Qnl0ZXNFbmNvZGVyKGNvbmZpZyA9IHt9KSB7XG4gIGNvbnN0IHNpemUgPSBjb25maWcuc2l6ZSA/PyBcInZhcmlhYmxlXCI7XG4gIGNvbnN0IGJ5dGVFbmNvZGVyID0gY3JlYXRlRW5jb2Rlcih7XG4gICAgZ2V0U2l6ZUZyb21WYWx1ZTogKHZhbHVlKSA9PiB2YWx1ZS5sZW5ndGgsXG4gICAgd3JpdGU6ICh2YWx1ZSwgYnl0ZXMsIG9mZnNldCkgPT4ge1xuICAgICAgYnl0ZXMuc2V0KHZhbHVlLCBvZmZzZXQpO1xuICAgICAgcmV0dXJuIG9mZnNldCArIHZhbHVlLmxlbmd0aDtcbiAgICB9XG4gIH0pO1xuICBpZiAoc2l6ZSA9PT0gXCJ2YXJpYWJsZVwiKSB7XG4gICAgcmV0dXJuIGJ5dGVFbmNvZGVyO1xuICB9XG4gIGlmICh0eXBlb2Ygc2l6ZSA9PT0gXCJudW1iZXJcIikge1xuICAgIHJldHVybiBmaXhFbmNvZGVyKGJ5dGVFbmNvZGVyLCBzaXplKTtcbiAgfVxuICByZXR1cm4gY3JlYXRlRW5jb2Rlcih7XG4gICAgZ2V0U2l6ZUZyb21WYWx1ZTogKHZhbHVlKSA9PiBnZXRFbmNvZGVkU2l6ZSh2YWx1ZS5sZW5ndGgsIHNpemUpICsgdmFsdWUubGVuZ3RoLFxuICAgIHdyaXRlOiAodmFsdWUsIGJ5dGVzLCBvZmZzZXQpID0+IHtcbiAgICAgIG9mZnNldCA9IHNpemUud3JpdGUodmFsdWUubGVuZ3RoLCBieXRlcywgb2Zmc2V0KTtcbiAgICAgIHJldHVybiBieXRlRW5jb2Rlci53cml0ZSh2YWx1ZSwgYnl0ZXMsIG9mZnNldCk7XG4gICAgfVxuICB9KTtcbn1cbmZ1bmN0aW9uIGdldEJ5dGVzRGVjb2Rlcihjb25maWcgPSB7fSkge1xuICBjb25zdCBzaXplID0gY29uZmlnLnNpemUgPz8gXCJ2YXJpYWJsZVwiO1xuICBjb25zdCBieXRlRGVjb2RlciA9IGNyZWF0ZURlY29kZXIoe1xuICAgIHJlYWQ6IChieXRlcywgb2Zmc2V0KSA9PiB7XG4gICAgICBjb25zdCBzbGljZSA9IGJ5dGVzLnNsaWNlKG9mZnNldCk7XG4gICAgICByZXR1cm4gW3NsaWNlLCBvZmZzZXQgKyBzbGljZS5sZW5ndGhdO1xuICAgIH1cbiAgfSk7XG4gIGlmIChzaXplID09PSBcInZhcmlhYmxlXCIpIHtcbiAgICByZXR1cm4gYnl0ZURlY29kZXI7XG4gIH1cbiAgaWYgKHR5cGVvZiBzaXplID09PSBcIm51bWJlclwiKSB7XG4gICAgcmV0dXJuIGZpeERlY29kZXIoYnl0ZURlY29kZXIsIHNpemUpO1xuICB9XG4gIHJldHVybiBjcmVhdGVEZWNvZGVyKHtcbiAgICByZWFkOiAoYnl0ZXMsIG9mZnNldCkgPT4ge1xuICAgICAgYXNzZXJ0Qnl0ZUFycmF5SXNOb3RFbXB0eUZvckNvZGVjKFwiYnl0ZXNcIiwgYnl0ZXMsIG9mZnNldCk7XG4gICAgICBjb25zdCBbbGVuZ3RoQmlnSW50LCBsZW5ndGhPZmZzZXRdID0gc2l6ZS5yZWFkKGJ5dGVzLCBvZmZzZXQpO1xuICAgICAgY29uc3QgbGVuZ3RoID0gTnVtYmVyKGxlbmd0aEJpZ0ludCk7XG4gICAgICBvZmZzZXQgPSBsZW5ndGhPZmZzZXQ7XG4gICAgICBjb25zdCBjb250ZW50Qnl0ZXMgPSBieXRlcy5zbGljZShvZmZzZXQsIG9mZnNldCArIGxlbmd0aCk7XG4gICAgICBhc3NlcnRCeXRlQXJyYXlIYXNFbm91Z2hCeXRlc0ZvckNvZGVjKFwiYnl0ZXNcIiwgbGVuZ3RoLCBjb250ZW50Qnl0ZXMpO1xuICAgICAgY29uc3QgW3ZhbHVlLCBjb250ZW50T2Zmc2V0XSA9IGJ5dGVEZWNvZGVyLnJlYWQoY29udGVudEJ5dGVzLCAwKTtcbiAgICAgIG9mZnNldCArPSBjb250ZW50T2Zmc2V0O1xuICAgICAgcmV0dXJuIFt2YWx1ZSwgb2Zmc2V0XTtcbiAgICB9XG4gIH0pO1xufVxuZnVuY3Rpb24gZ2V0Qnl0ZXNDb2RlYyhjb25maWcgPSB7fSkge1xuICByZXR1cm4gY29tYmluZUNvZGVjKGdldEJ5dGVzRW5jb2Rlcihjb25maWcpLCBnZXRCeXRlc0RlY29kZXIoY29uZmlnKSk7XG59XG5mdW5jdGlvbiBnZXREYXRhRW51bUVuY29kZXIodmFyaWFudHMsIGNvbmZpZyA9IHt9KSB7XG4gIGNvbnN0IHByZWZpeCA9IGNvbmZpZy5zaXplID8/IGdldFU4RW5jb2RlcigpO1xuICBjb25zdCBmaXhlZFNpemUgPSBnZXREYXRhRW51bUZpeGVkU2l6ZSh2YXJpYW50cywgcHJlZml4KTtcbiAgcmV0dXJuIGNyZWF0ZUVuY29kZXIoe1xuICAgIC4uLmZpeGVkU2l6ZSAhPT0gbnVsbCA/IHsgZml4ZWRTaXplIH0gOiB7XG4gICAgICBnZXRTaXplRnJvbVZhbHVlOiAodmFyaWFudCkgPT4ge1xuICAgICAgICBjb25zdCBkaXNjcmltaW5hdG9yID0gZ2V0VmFyaWFudERpc2NyaW1pbmF0b3IodmFyaWFudHMsIHZhcmlhbnQpO1xuICAgICAgICBjb25zdCB2YXJpYW50RW5jb2RlciA9IHZhcmlhbnRzW2Rpc2NyaW1pbmF0b3JdWzFdO1xuICAgICAgICByZXR1cm4gZ2V0RW5jb2RlZFNpemUoZGlzY3JpbWluYXRvciwgcHJlZml4KSArIGdldEVuY29kZWRTaXplKHZhcmlhbnQsIHZhcmlhbnRFbmNvZGVyKTtcbiAgICAgIH0sXG4gICAgICBtYXhTaXplOiBnZXREYXRhRW51bU1heFNpemUodmFyaWFudHMsIHByZWZpeClcbiAgICB9LFxuICAgIHdyaXRlOiAodmFyaWFudCwgYnl0ZXMsIG9mZnNldCkgPT4ge1xuICAgICAgY29uc3QgZGlzY3JpbWluYXRvciA9IGdldFZhcmlhbnREaXNjcmltaW5hdG9yKHZhcmlhbnRzLCB2YXJpYW50KTtcbiAgICAgIG9mZnNldCA9IHByZWZpeC53cml0ZShkaXNjcmltaW5hdG9yLCBieXRlcywgb2Zmc2V0KTtcbiAgICAgIGNvbnN0IHZhcmlhbnRFbmNvZGVyID0gdmFyaWFudHNbZGlzY3JpbWluYXRvcl1bMV07XG4gICAgICByZXR1cm4gdmFyaWFudEVuY29kZXIud3JpdGUodmFyaWFudCwgYnl0ZXMsIG9mZnNldCk7XG4gICAgfVxuICB9KTtcbn1cbmZ1bmN0aW9uIGdldERhdGFFbnVtRGVjb2Rlcih2YXJpYW50cywgY29uZmlnID0ge30pIHtcbiAgY29uc3QgcHJlZml4ID0gY29uZmlnLnNpemUgPz8gZ2V0VThEZWNvZGVyKCk7XG4gIGNvbnN0IGZpeGVkU2l6ZSA9IGdldERhdGFFbnVtRml4ZWRTaXplKHZhcmlhbnRzLCBwcmVmaXgpO1xuICByZXR1cm4gY3JlYXRlRGVjb2Rlcih7XG4gICAgLi4uZml4ZWRTaXplICE9PSBudWxsID8geyBmaXhlZFNpemUgfSA6IHsgbWF4U2l6ZTogZ2V0RGF0YUVudW1NYXhTaXplKHZhcmlhbnRzLCBwcmVmaXgpIH0sXG4gICAgcmVhZDogKGJ5dGVzLCBvZmZzZXQpID0+IHtcbiAgICAgIGFzc2VydEJ5dGVBcnJheUlzTm90RW1wdHlGb3JDb2RlYyhcImRhdGFFbnVtXCIsIGJ5dGVzLCBvZmZzZXQpO1xuICAgICAgY29uc3QgW2Rpc2NyaW1pbmF0b3IsIGRPZmZzZXRdID0gcHJlZml4LnJlYWQoYnl0ZXMsIG9mZnNldCk7XG4gICAgICBvZmZzZXQgPSBkT2Zmc2V0O1xuICAgICAgY29uc3QgdmFyaWFudEZpZWxkID0gdmFyaWFudHNbTnVtYmVyKGRpc2NyaW1pbmF0b3IpXSA/PyBudWxsO1xuICAgICAgaWYgKCF2YXJpYW50RmllbGQpIHtcbiAgICAgICAgdGhyb3cgbmV3IFNvbGFuYUVycm9yKFNPTEFOQV9FUlJPUl9fQ09ERUNTX19FTlVNX0RJU0NSSU1JTkFUT1JfT1VUX09GX1JBTkdFLCB7XG4gICAgICAgICAgZGlzY3JpbWluYXRvcixcbiAgICAgICAgICBtYXhSYW5nZTogdmFyaWFudHMubGVuZ3RoIC0gMSxcbiAgICAgICAgICBtaW5SYW5nZTogMFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IFt2YXJpYW50LCB2T2Zmc2V0XSA9IHZhcmlhbnRGaWVsZFsxXS5yZWFkKGJ5dGVzLCBvZmZzZXQpO1xuICAgICAgb2Zmc2V0ID0gdk9mZnNldDtcbiAgICAgIHJldHVybiBbeyBfX2tpbmQ6IHZhcmlhbnRGaWVsZFswXSwgLi4udmFyaWFudCA/PyB7fSB9LCBvZmZzZXRdO1xuICAgIH1cbiAgfSk7XG59XG5mdW5jdGlvbiBnZXREYXRhRW51bUNvZGVjKHZhcmlhbnRzLCBjb25maWcgPSB7fSkge1xuICByZXR1cm4gY29tYmluZUNvZGVjKFxuICAgIGdldERhdGFFbnVtRW5jb2Rlcih2YXJpYW50cywgY29uZmlnKSxcbiAgICBnZXREYXRhRW51bURlY29kZXIodmFyaWFudHMsIGNvbmZpZylcbiAgKTtcbn1cbmZ1bmN0aW9uIGdldERhdGFFbnVtRml4ZWRTaXplKHZhcmlhbnRzLCBwcmVmaXgpIHtcbiAgaWYgKHZhcmlhbnRzLmxlbmd0aCA9PT0gMClcbiAgICByZXR1cm4gaXNGaXhlZFNpemUocHJlZml4KSA/IHByZWZpeC5maXhlZFNpemUgOiBudWxsO1xuICBpZiAoIWlzRml4ZWRTaXplKHZhcmlhbnRzWzBdWzFdKSlcbiAgICByZXR1cm4gbnVsbDtcbiAgY29uc3QgdmFyaWFudFNpemUgPSB2YXJpYW50c1swXVsxXS5maXhlZFNpemU7XG4gIGNvbnN0IHNhbWVTaXplZFZhcmlhbnRzID0gdmFyaWFudHMuZXZlcnkoXG4gICAgKHZhcmlhbnQpID0+IGlzRml4ZWRTaXplKHZhcmlhbnRbMV0pICYmIHZhcmlhbnRbMV0uZml4ZWRTaXplID09PSB2YXJpYW50U2l6ZVxuICApO1xuICBpZiAoIXNhbWVTaXplZFZhcmlhbnRzKVxuICAgIHJldHVybiBudWxsO1xuICByZXR1cm4gaXNGaXhlZFNpemUocHJlZml4KSA/IHByZWZpeC5maXhlZFNpemUgKyB2YXJpYW50U2l6ZSA6IG51bGw7XG59XG5mdW5jdGlvbiBnZXREYXRhRW51bU1heFNpemUodmFyaWFudHMsIHByZWZpeCkge1xuICBjb25zdCBtYXhWYXJpYW50U2l6ZSA9IG1heENvZGVjU2l6ZXModmFyaWFudHMubWFwKChbLCBjb2RlY10pID0+IGdldE1heFNpemUoY29kZWMpKSk7XG4gIHJldHVybiBzdW1Db2RlY1NpemVzKFtnZXRNYXhTaXplKHByZWZpeCksIG1heFZhcmlhbnRTaXplXSkgPz8gdm9pZCAwO1xufVxuZnVuY3Rpb24gZ2V0VmFyaWFudERpc2NyaW1pbmF0b3IodmFyaWFudHMsIHZhcmlhbnQpIHtcbiAgY29uc3QgZGlzY3JpbWluYXRvciA9IHZhcmlhbnRzLmZpbmRJbmRleCgoW2tleV0pID0+IHZhcmlhbnQuX19raW5kID09PSBrZXkpO1xuICBpZiAoZGlzY3JpbWluYXRvciA8IDApIHtcbiAgICB0aHJvdyBuZXcgU29sYW5hRXJyb3IoU09MQU5BX0VSUk9SX19DT0RFQ1NfX0lOVkFMSURfREFUQV9FTlVNX1ZBUklBTlQsIHtcbiAgICAgIHZhbHVlOiB2YXJpYW50Ll9fa2luZCxcbiAgICAgIHZhcmlhbnRzOiB2YXJpYW50cy5tYXAoKFtrZXldKSA9PiBrZXkpXG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIGRpc2NyaW1pbmF0b3I7XG59XG5mdW5jdGlvbiBnZXRUdXBsZUVuY29kZXIoaXRlbXMpIHtcbiAgY29uc3QgZml4ZWRTaXplID0gc3VtQ29kZWNTaXplcyhpdGVtcy5tYXAoZ2V0Rml4ZWRTaXplKSk7XG4gIGNvbnN0IG1heFNpemUgPSBzdW1Db2RlY1NpemVzKGl0ZW1zLm1hcChnZXRNYXhTaXplKSkgPz8gdm9pZCAwO1xuICByZXR1cm4gY3JlYXRlRW5jb2Rlcih7XG4gICAgLi4uZml4ZWRTaXplID09PSBudWxsID8ge1xuICAgICAgZ2V0U2l6ZUZyb21WYWx1ZTogKHZhbHVlKSA9PiBpdGVtcy5tYXAoKGl0ZW0sIGluZGV4KSA9PiBnZXRFbmNvZGVkU2l6ZSh2YWx1ZVtpbmRleF0sIGl0ZW0pKS5yZWR1Y2UoKGFsbCwgb25lKSA9PiBhbGwgKyBvbmUsIDApLFxuICAgICAgbWF4U2l6ZVxuICAgIH0gOiB7IGZpeGVkU2l6ZSB9LFxuICAgIHdyaXRlOiAodmFsdWUsIGJ5dGVzLCBvZmZzZXQpID0+IHtcbiAgICAgIGFzc2VydFZhbGlkTnVtYmVyT2ZJdGVtc0ZvckNvZGVjKFwidHVwbGVcIiwgaXRlbXMubGVuZ3RoLCB2YWx1ZS5sZW5ndGgpO1xuICAgICAgaXRlbXMuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHtcbiAgICAgICAgb2Zmc2V0ID0gaXRlbS53cml0ZSh2YWx1ZVtpbmRleF0sIGJ5dGVzLCBvZmZzZXQpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gb2Zmc2V0O1xuICAgIH1cbiAgfSk7XG59XG5mdW5jdGlvbiBnZXRUdXBsZURlY29kZXIoaXRlbXMpIHtcbiAgY29uc3QgZml4ZWRTaXplID0gc3VtQ29kZWNTaXplcyhpdGVtcy5tYXAoZ2V0Rml4ZWRTaXplKSk7XG4gIGNvbnN0IG1heFNpemUgPSBzdW1Db2RlY1NpemVzKGl0ZW1zLm1hcChnZXRNYXhTaXplKSkgPz8gdm9pZCAwO1xuICByZXR1cm4gY3JlYXRlRGVjb2Rlcih7XG4gICAgLi4uZml4ZWRTaXplID09PSBudWxsID8geyBtYXhTaXplIH0gOiB7IGZpeGVkU2l6ZSB9LFxuICAgIHJlYWQ6IChieXRlcywgb2Zmc2V0KSA9PiB7XG4gICAgICBjb25zdCB2YWx1ZXMgPSBbXTtcbiAgICAgIGl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgICAgY29uc3QgW25ld1ZhbHVlLCBuZXdPZmZzZXRdID0gaXRlbS5yZWFkKGJ5dGVzLCBvZmZzZXQpO1xuICAgICAgICB2YWx1ZXMucHVzaChuZXdWYWx1ZSk7XG4gICAgICAgIG9mZnNldCA9IG5ld09mZnNldDtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIFt2YWx1ZXMsIG9mZnNldF07XG4gICAgfVxuICB9KTtcbn1cbmZ1bmN0aW9uIGdldFR1cGxlQ29kZWMoaXRlbXMpIHtcbiAgcmV0dXJuIGNvbWJpbmVDb2RlYyhcbiAgICBnZXRUdXBsZUVuY29kZXIoaXRlbXMpLFxuICAgIGdldFR1cGxlRGVjb2RlcihpdGVtcylcbiAgKTtcbn1cblxuLy8gc3JjL21hcC50c1xuZnVuY3Rpb24gZ2V0TWFwRW5jb2RlcihrZXksIHZhbHVlLCBjb25maWcgPSB7fSkge1xuICByZXR1cm4gbWFwRW5jb2RlcihcbiAgICBnZXRBcnJheUVuY29kZXIoZ2V0VHVwbGVFbmNvZGVyKFtrZXksIHZhbHVlXSksIGNvbmZpZyksXG4gICAgKG1hcCkgPT4gWy4uLm1hcC5lbnRyaWVzKCldXG4gICk7XG59XG5mdW5jdGlvbiBnZXRNYXBEZWNvZGVyKGtleSwgdmFsdWUsIGNvbmZpZyA9IHt9KSB7XG4gIHJldHVybiBtYXBEZWNvZGVyKFxuICAgIGdldEFycmF5RGVjb2RlcihnZXRUdXBsZURlY29kZXIoW2tleSwgdmFsdWVdKSwgY29uZmlnKSxcbiAgICAoZW50cmllcykgPT4gbmV3IE1hcChlbnRyaWVzKVxuICApO1xufVxuZnVuY3Rpb24gZ2V0TWFwQ29kZWMoa2V5LCB2YWx1ZSwgY29uZmlnID0ge30pIHtcbiAgcmV0dXJuIGNvbWJpbmVDb2RlYyhnZXRNYXBFbmNvZGVyKGtleSwgdmFsdWUsIGNvbmZpZyksIGdldE1hcERlY29kZXIoa2V5LCB2YWx1ZSwgY29uZmlnKSk7XG59XG5mdW5jdGlvbiBnZXROdWxsYWJsZUVuY29kZXIoaXRlbSwgY29uZmlnID0ge30pIHtcbiAgY29uc3QgcHJlZml4ID0gY29uZmlnLnByZWZpeCA/PyBnZXRVOEVuY29kZXIoKTtcbiAgY29uc3QgZml4ZWQgPSBjb25maWcuZml4ZWQgPz8gZmFsc2U7XG4gIGNvbnN0IGlzWmVyb1NpemVJdGVtID0gaXNGaXhlZFNpemUoaXRlbSkgJiYgaXNGaXhlZFNpemUocHJlZml4KSAmJiBpdGVtLmZpeGVkU2l6ZSA9PT0gMDtcbiAgaWYgKGZpeGVkIHx8IGlzWmVyb1NpemVJdGVtKSB7XG4gICAgYXNzZXJ0SXNGaXhlZFNpemUoaXRlbSk7XG4gICAgYXNzZXJ0SXNGaXhlZFNpemUocHJlZml4KTtcbiAgICBjb25zdCBmaXhlZFNpemUgPSBwcmVmaXguZml4ZWRTaXplICsgaXRlbS5maXhlZFNpemU7XG4gICAgcmV0dXJuIGNyZWF0ZUVuY29kZXIoe1xuICAgICAgZml4ZWRTaXplLFxuICAgICAgd3JpdGU6IChvcHRpb24sIGJ5dGVzLCBvZmZzZXQpID0+IHtcbiAgICAgICAgY29uc3QgcHJlZml4T2Zmc2V0ID0gcHJlZml4LndyaXRlKE51bWJlcihvcHRpb24gIT09IG51bGwpLCBieXRlcywgb2Zmc2V0KTtcbiAgICAgICAgaWYgKG9wdGlvbiAhPT0gbnVsbCkge1xuICAgICAgICAgIGl0ZW0ud3JpdGUob3B0aW9uLCBieXRlcywgcHJlZml4T2Zmc2V0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb2Zmc2V0ICsgZml4ZWRTaXplO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG4gIHJldHVybiBjcmVhdGVFbmNvZGVyKHtcbiAgICBnZXRTaXplRnJvbVZhbHVlOiAob3B0aW9uKSA9PiBnZXRFbmNvZGVkU2l6ZShOdW1iZXIob3B0aW9uICE9PSBudWxsKSwgcHJlZml4KSArIChvcHRpb24gIT09IG51bGwgPyBnZXRFbmNvZGVkU2l6ZShvcHRpb24sIGl0ZW0pIDogMCksXG4gICAgbWF4U2l6ZTogc3VtQ29kZWNTaXplcyhbcHJlZml4LCBpdGVtXS5tYXAoZ2V0TWF4U2l6ZSkpID8/IHZvaWQgMCxcbiAgICB3cml0ZTogKG9wdGlvbiwgYnl0ZXMsIG9mZnNldCkgPT4ge1xuICAgICAgb2Zmc2V0ID0gcHJlZml4LndyaXRlKE51bWJlcihvcHRpb24gIT09IG51bGwpLCBieXRlcywgb2Zmc2V0KTtcbiAgICAgIGlmIChvcHRpb24gIT09IG51bGwpIHtcbiAgICAgICAgb2Zmc2V0ID0gaXRlbS53cml0ZShvcHRpb24sIGJ5dGVzLCBvZmZzZXQpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG9mZnNldDtcbiAgICB9XG4gIH0pO1xufVxuZnVuY3Rpb24gZ2V0TnVsbGFibGVEZWNvZGVyKGl0ZW0sIGNvbmZpZyA9IHt9KSB7XG4gIGNvbnN0IHByZWZpeCA9IGNvbmZpZy5wcmVmaXggPz8gZ2V0VThEZWNvZGVyKCk7XG4gIGNvbnN0IGZpeGVkID0gY29uZmlnLmZpeGVkID8/IGZhbHNlO1xuICBsZXQgZml4ZWRTaXplID0gbnVsbDtcbiAgY29uc3QgaXNaZXJvU2l6ZUl0ZW0gPSBpc0ZpeGVkU2l6ZShpdGVtKSAmJiBpc0ZpeGVkU2l6ZShwcmVmaXgpICYmIGl0ZW0uZml4ZWRTaXplID09PSAwO1xuICBpZiAoZml4ZWQgfHwgaXNaZXJvU2l6ZUl0ZW0pIHtcbiAgICBhc3NlcnRJc0ZpeGVkU2l6ZShpdGVtKTtcbiAgICBhc3NlcnRJc0ZpeGVkU2l6ZShwcmVmaXgpO1xuICAgIGZpeGVkU2l6ZSA9IHByZWZpeC5maXhlZFNpemUgKyBpdGVtLmZpeGVkU2l6ZTtcbiAgfVxuICByZXR1cm4gY3JlYXRlRGVjb2Rlcih7XG4gICAgLi4uZml4ZWRTaXplID09PSBudWxsID8geyBtYXhTaXplOiBzdW1Db2RlY1NpemVzKFtwcmVmaXgsIGl0ZW1dLm1hcChnZXRNYXhTaXplKSkgPz8gdm9pZCAwIH0gOiB7IGZpeGVkU2l6ZSB9LFxuICAgIHJlYWQ6IChieXRlcywgb2Zmc2V0KSA9PiB7XG4gICAgICBpZiAoYnl0ZXMubGVuZ3RoIC0gb2Zmc2V0IDw9IDApIHtcbiAgICAgICAgcmV0dXJuIFtudWxsLCBvZmZzZXRdO1xuICAgICAgfVxuICAgICAgY29uc3QgW2lzU29tZSwgcHJlZml4T2Zmc2V0XSA9IHByZWZpeC5yZWFkKGJ5dGVzLCBvZmZzZXQpO1xuICAgICAgaWYgKGlzU29tZSA9PT0gMCkge1xuICAgICAgICByZXR1cm4gW251bGwsIGZpeGVkU2l6ZSAhPT0gbnVsbCA/IG9mZnNldCArIGZpeGVkU2l6ZSA6IHByZWZpeE9mZnNldF07XG4gICAgICB9XG4gICAgICBjb25zdCBbdmFsdWUsIG5ld09mZnNldF0gPSBpdGVtLnJlYWQoYnl0ZXMsIHByZWZpeE9mZnNldCk7XG4gICAgICByZXR1cm4gW3ZhbHVlLCBmaXhlZFNpemUgIT09IG51bGwgPyBvZmZzZXQgKyBmaXhlZFNpemUgOiBuZXdPZmZzZXRdO1xuICAgIH1cbiAgfSk7XG59XG5mdW5jdGlvbiBnZXROdWxsYWJsZUNvZGVjKGl0ZW0sIGNvbmZpZyA9IHt9KSB7XG4gIGNvbnN0IGNvbmZpZ0Nhc3QgPSBjb25maWc7XG4gIHJldHVybiBjb21iaW5lQ29kZWMoZ2V0TnVsbGFibGVFbmNvZGVyKGl0ZW0sIGNvbmZpZ0Nhc3QpLCBnZXROdWxsYWJsZURlY29kZXIoaXRlbSwgY29uZmlnQ2FzdCkpO1xufVxuZnVuY3Rpb24gZ2V0U2NhbGFyRW51bUVuY29kZXIoY29uc3RydWN0b3IsIGNvbmZpZyA9IHt9KSB7XG4gIGNvbnN0IHByZWZpeCA9IGNvbmZpZy5zaXplID8/IGdldFU4RW5jb2RlcigpO1xuICBjb25zdCB7IG1pblJhbmdlLCBtYXhSYW5nZSwgYWxsU3RyaW5nSW5wdXRzLCBlbnVtS2V5cywgZW51bVZhbHVlcyB9ID0gZ2V0U2NhbGFyRW51bVN0YXRzKGNvbnN0cnVjdG9yKTtcbiAgcmV0dXJuIG1hcEVuY29kZXIocHJlZml4LCAodmFsdWUpID0+IHtcbiAgICBjb25zdCBpc0ludmFsaWROdW1iZXIgPSB0eXBlb2YgdmFsdWUgPT09IFwibnVtYmVyXCIgJiYgKHZhbHVlIDwgbWluUmFuZ2UgfHwgdmFsdWUgPiBtYXhSYW5nZSk7XG4gICAgY29uc3QgaXNJbnZhbGlkU3RyaW5nID0gdHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiICYmICFhbGxTdHJpbmdJbnB1dHMuaW5jbHVkZXModmFsdWUpO1xuICAgIGlmIChpc0ludmFsaWROdW1iZXIgfHwgaXNJbnZhbGlkU3RyaW5nKSB7XG4gICAgICB0aHJvdyBuZXcgU29sYW5hRXJyb3IoU09MQU5BX0VSUk9SX19DT0RFQ1NfX0lOVkFMSURfU0NBTEFSX0VOVU1fVkFSSUFOVCwge1xuICAgICAgICBtYXhSYW5nZSxcbiAgICAgICAgbWluUmFuZ2UsXG4gICAgICAgIHZhbHVlLFxuICAgICAgICB2YXJpYW50czogYWxsU3RyaW5nSW5wdXRzXG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJudW1iZXJcIilcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICBjb25zdCB2YWx1ZUluZGV4ID0gZW51bVZhbHVlcy5pbmRleE9mKHZhbHVlKTtcbiAgICBpZiAodmFsdWVJbmRleCA+PSAwKVxuICAgICAgcmV0dXJuIHZhbHVlSW5kZXg7XG4gICAgcmV0dXJuIGVudW1LZXlzLmluZGV4T2YodmFsdWUpO1xuICB9KTtcbn1cbmZ1bmN0aW9uIGdldFNjYWxhckVudW1EZWNvZGVyKGNvbnN0cnVjdG9yLCBjb25maWcgPSB7fSkge1xuICBjb25zdCBwcmVmaXggPSBjb25maWcuc2l6ZSA/PyBnZXRVOERlY29kZXIoKTtcbiAgY29uc3QgeyBtaW5SYW5nZSwgbWF4UmFuZ2UsIGVudW1LZXlzIH0gPSBnZXRTY2FsYXJFbnVtU3RhdHMoY29uc3RydWN0b3IpO1xuICByZXR1cm4gbWFwRGVjb2RlcihwcmVmaXgsICh2YWx1ZSkgPT4ge1xuICAgIGNvbnN0IHZhbHVlQXNOdW1iZXIgPSBOdW1iZXIodmFsdWUpO1xuICAgIGlmICh2YWx1ZUFzTnVtYmVyIDwgbWluUmFuZ2UgfHwgdmFsdWVBc051bWJlciA+IG1heFJhbmdlKSB7XG4gICAgICB0aHJvdyBuZXcgU29sYW5hRXJyb3IoU09MQU5BX0VSUk9SX19DT0RFQ1NfX0VOVU1fRElTQ1JJTUlOQVRPUl9PVVRfT0ZfUkFOR0UsIHtcbiAgICAgICAgZGlzY3JpbWluYXRvcjogdmFsdWVBc051bWJlcixcbiAgICAgICAgbWF4UmFuZ2UsXG4gICAgICAgIG1pblJhbmdlXG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGNvbnN0cnVjdG9yW2VudW1LZXlzW3ZhbHVlQXNOdW1iZXJdXTtcbiAgfSk7XG59XG5mdW5jdGlvbiBnZXRTY2FsYXJFbnVtQ29kZWMoY29uc3RydWN0b3IsIGNvbmZpZyA9IHt9KSB7XG4gIHJldHVybiBjb21iaW5lQ29kZWMoZ2V0U2NhbGFyRW51bUVuY29kZXIoY29uc3RydWN0b3IsIGNvbmZpZyksIGdldFNjYWxhckVudW1EZWNvZGVyKGNvbnN0cnVjdG9yLCBjb25maWcpKTtcbn1cbmZ1bmN0aW9uIGdldFNjYWxhckVudW1TdGF0cyhjb25zdHJ1Y3Rvcikge1xuICBjb25zdCBudW1lcmljVmFsdWVzID0gT2JqZWN0LnZhbHVlcyhjb25zdHJ1Y3RvcikuZmlsdGVyKCh2KSA9PiB0eXBlb2YgdiA9PT0gXCJudW1iZXJcIik7XG4gIGNvbnN0IGRlZHVwbGljYXRlZENvbnN0cnVjdG9yID0gT2JqZWN0LmZyb21FbnRyaWVzKFxuICAgIE9iamVjdC5lbnRyaWVzKGNvbnN0cnVjdG9yKS5zbGljZShudW1lcmljVmFsdWVzLmxlbmd0aClcbiAgKTtcbiAgY29uc3QgZW51bUtleXMgPSBPYmplY3Qua2V5cyhkZWR1cGxpY2F0ZWRDb25zdHJ1Y3Rvcik7XG4gIGNvbnN0IGVudW1WYWx1ZXMgPSBPYmplY3QudmFsdWVzKGRlZHVwbGljYXRlZENvbnN0cnVjdG9yKTtcbiAgY29uc3QgbWluUmFuZ2UgPSAwO1xuICBjb25zdCBtYXhSYW5nZSA9IGVudW1WYWx1ZXMubGVuZ3RoIC0gMTtcbiAgY29uc3QgYWxsU3RyaW5nSW5wdXRzID0gW1xuICAgIC4uLi8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KFsuLi5lbnVtS2V5cywgLi4uZW51bVZhbHVlcy5maWx0ZXIoKHYpID0+IHR5cGVvZiB2ID09PSBcInN0cmluZ1wiKV0pXG4gIF07XG4gIHJldHVybiB7XG4gICAgYWxsU3RyaW5nSW5wdXRzLFxuICAgIGVudW1LZXlzLFxuICAgIGVudW1WYWx1ZXMsXG4gICAgbWF4UmFuZ2UsXG4gICAgbWluUmFuZ2VcbiAgfTtcbn1cbmZ1bmN0aW9uIGdldFNldEVuY29kZXIoaXRlbSwgY29uZmlnID0ge30pIHtcbiAgcmV0dXJuIG1hcEVuY29kZXIoZ2V0QXJyYXlFbmNvZGVyKGl0ZW0sIGNvbmZpZyksIChzZXQpID0+IFsuLi5zZXRdKTtcbn1cbmZ1bmN0aW9uIGdldFNldERlY29kZXIoaXRlbSwgY29uZmlnID0ge30pIHtcbiAgcmV0dXJuIG1hcERlY29kZXIoZ2V0QXJyYXlEZWNvZGVyKGl0ZW0sIGNvbmZpZyksIChlbnRyaWVzKSA9PiBuZXcgU2V0KGVudHJpZXMpKTtcbn1cbmZ1bmN0aW9uIGdldFNldENvZGVjKGl0ZW0sIGNvbmZpZyA9IHt9KSB7XG4gIHJldHVybiBjb21iaW5lQ29kZWMoZ2V0U2V0RW5jb2RlcihpdGVtLCBjb25maWcpLCBnZXRTZXREZWNvZGVyKGl0ZW0sIGNvbmZpZykpO1xufVxuZnVuY3Rpb24gZ2V0U3RydWN0RW5jb2RlcihmaWVsZHMpIHtcbiAgY29uc3QgZmllbGRDb2RlY3MgPSBmaWVsZHMubWFwKChbLCBjb2RlY10pID0+IGNvZGVjKTtcbiAgY29uc3QgZml4ZWRTaXplID0gc3VtQ29kZWNTaXplcyhmaWVsZENvZGVjcy5tYXAoZ2V0Rml4ZWRTaXplKSk7XG4gIGNvbnN0IG1heFNpemUgPSBzdW1Db2RlY1NpemVzKGZpZWxkQ29kZWNzLm1hcChnZXRNYXhTaXplKSkgPz8gdm9pZCAwO1xuICByZXR1cm4gY3JlYXRlRW5jb2Rlcih7XG4gICAgLi4uZml4ZWRTaXplID09PSBudWxsID8ge1xuICAgICAgZ2V0U2l6ZUZyb21WYWx1ZTogKHZhbHVlKSA9PiBmaWVsZHMubWFwKChba2V5LCBjb2RlY10pID0+IGdldEVuY29kZWRTaXplKHZhbHVlW2tleV0sIGNvZGVjKSkucmVkdWNlKChhbGwsIG9uZSkgPT4gYWxsICsgb25lLCAwKSxcbiAgICAgIG1heFNpemVcbiAgICB9IDogeyBmaXhlZFNpemUgfSxcbiAgICB3cml0ZTogKHN0cnVjdCwgYnl0ZXMsIG9mZnNldCkgPT4ge1xuICAgICAgZmllbGRzLmZvckVhY2goKFtrZXksIGNvZGVjXSkgPT4ge1xuICAgICAgICBvZmZzZXQgPSBjb2RlYy53cml0ZShzdHJ1Y3Rba2V5XSwgYnl0ZXMsIG9mZnNldCk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBvZmZzZXQ7XG4gICAgfVxuICB9KTtcbn1cbmZ1bmN0aW9uIGdldFN0cnVjdERlY29kZXIoZmllbGRzKSB7XG4gIGNvbnN0IGZpZWxkQ29kZWNzID0gZmllbGRzLm1hcCgoWywgY29kZWNdKSA9PiBjb2RlYyk7XG4gIGNvbnN0IGZpeGVkU2l6ZSA9IHN1bUNvZGVjU2l6ZXMoZmllbGRDb2RlY3MubWFwKGdldEZpeGVkU2l6ZSkpO1xuICBjb25zdCBtYXhTaXplID0gc3VtQ29kZWNTaXplcyhmaWVsZENvZGVjcy5tYXAoZ2V0TWF4U2l6ZSkpID8/IHZvaWQgMDtcbiAgcmV0dXJuIGNyZWF0ZURlY29kZXIoe1xuICAgIC4uLmZpeGVkU2l6ZSA9PT0gbnVsbCA/IHsgbWF4U2l6ZSB9IDogeyBmaXhlZFNpemUgfSxcbiAgICByZWFkOiAoYnl0ZXMsIG9mZnNldCkgPT4ge1xuICAgICAgY29uc3Qgc3RydWN0ID0ge307XG4gICAgICBmaWVsZHMuZm9yRWFjaCgoW2tleSwgY29kZWNdKSA9PiB7XG4gICAgICAgIGNvbnN0IFt2YWx1ZSwgbmV3T2Zmc2V0XSA9IGNvZGVjLnJlYWQoYnl0ZXMsIG9mZnNldCk7XG4gICAgICAgIG9mZnNldCA9IG5ld09mZnNldDtcbiAgICAgICAgc3RydWN0W2tleV0gPSB2YWx1ZTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIFtzdHJ1Y3QsIG9mZnNldF07XG4gICAgfVxuICB9KTtcbn1cbmZ1bmN0aW9uIGdldFN0cnVjdENvZGVjKGZpZWxkcykge1xuICByZXR1cm4gY29tYmluZUNvZGVjKFxuICAgIGdldFN0cnVjdEVuY29kZXIoZmllbGRzKSxcbiAgICBnZXRTdHJ1Y3REZWNvZGVyKGZpZWxkcylcbiAgKTtcbn1cbmZ1bmN0aW9uIGdldFVuaXRFbmNvZGVyKCkge1xuICByZXR1cm4gY3JlYXRlRW5jb2Rlcih7XG4gICAgZml4ZWRTaXplOiAwLFxuICAgIHdyaXRlOiAoX3ZhbHVlLCBfYnl0ZXMsIG9mZnNldCkgPT4gb2Zmc2V0XG4gIH0pO1xufVxuZnVuY3Rpb24gZ2V0VW5pdERlY29kZXIoKSB7XG4gIHJldHVybiBjcmVhdGVEZWNvZGVyKHtcbiAgICBmaXhlZFNpemU6IDAsXG4gICAgcmVhZDogKF9ieXRlcywgb2Zmc2V0KSA9PiBbdm9pZCAwLCBvZmZzZXRdXG4gIH0pO1xufVxuZnVuY3Rpb24gZ2V0VW5pdENvZGVjKCkge1xuICByZXR1cm4gY29tYmluZUNvZGVjKGdldFVuaXRFbmNvZGVyKCksIGdldFVuaXREZWNvZGVyKCkpO1xufVxuXG5leHBvcnQgeyBhc3NlcnRWYWxpZE51bWJlck9mSXRlbXNGb3JDb2RlYywgZ2V0QXJyYXlDb2RlYywgZ2V0QXJyYXlEZWNvZGVyLCBnZXRBcnJheUVuY29kZXIsIGdldEJpdEFycmF5Q29kZWMsIGdldEJpdEFycmF5RGVjb2RlciwgZ2V0Qml0QXJyYXlFbmNvZGVyLCBnZXRCb29sZWFuQ29kZWMsIGdldEJvb2xlYW5EZWNvZGVyLCBnZXRCb29sZWFuRW5jb2RlciwgZ2V0Qnl0ZXNDb2RlYywgZ2V0Qnl0ZXNEZWNvZGVyLCBnZXRCeXRlc0VuY29kZXIsIGdldERhdGFFbnVtQ29kZWMsIGdldERhdGFFbnVtRGVjb2RlciwgZ2V0RGF0YUVudW1FbmNvZGVyLCBnZXRNYXBDb2RlYywgZ2V0TWFwRGVjb2RlciwgZ2V0TWFwRW5jb2RlciwgZ2V0TnVsbGFibGVDb2RlYywgZ2V0TnVsbGFibGVEZWNvZGVyLCBnZXROdWxsYWJsZUVuY29kZXIsIGdldFNjYWxhckVudW1Db2RlYywgZ2V0U2NhbGFyRW51bURlY29kZXIsIGdldFNjYWxhckVudW1FbmNvZGVyLCBnZXRTZXRDb2RlYywgZ2V0U2V0RGVjb2RlciwgZ2V0U2V0RW5jb2RlciwgZ2V0U3RydWN0Q29kZWMsIGdldFN0cnVjdERlY29kZXIsIGdldFN0cnVjdEVuY29kZXIsIGdldFR1cGxlQ29kZWMsIGdldFR1cGxlRGVjb2RlciwgZ2V0VHVwbGVFbmNvZGVyLCBnZXRVbml0Q29kZWMsIGdldFVuaXREZWNvZGVyLCBnZXRVbml0RW5jb2RlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b3V0LmpzLm1hcFxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgubm9kZS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/../../node_modules/.pnpm/@solana+codecs-data-structures@2.0.0-preview.2/node_modules/@solana/codecs-data-structures/dist/index.node.js\n");

/***/ })

};
;